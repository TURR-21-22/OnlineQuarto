var socket = io({transports: ['websocket'], upgrade: false}); //window.location.origin
var userInfo = <%-JSON.stringify(userInfo)%>;
userInfo = Object.assign({room: 'lobby'}, userInfo);

// if window or tab closed
//window.addEventListener('beforeunload', function (e) {
//    const div = document.getElementById(`${Info.name}_${Info.userID}`);
//    div.remove();
//    e.preventDefault();
//    e.returnValue = '';
//});
// chat input box submit event
document.getElementById("chatInputBox").addEventListener("keyup", function(event) {
    if (event.keyCode === 13) {
     document.getElementById("chatInputBox").submit();
  return false;
    }
});
//console.log(Info.userID)
//const session = socket.request.session;

socket.emit('join_Lobby', userInfo );
socket.on('connected_Lobby', (msg)=>{
    //socket.userID = Info.userID;
    //console.log(socket.id.userID);
    document.getElementById("socketInfo").innerHTML = socket.id;
    const display = document.getElementById('chatDisplay');
    display.innerHTML += `<h1>${msg}</h1><br>`;
});
//socket.emit("genUsrClient");
socket.on("usercount", (clients)=>{
    
   //console.log(socket.userID); 
   
    //var clients = JSON.parse(clients);
 
});
socket.on("genUsrServer", ()=>{
    console.log('AAAAAAAAAAAAAAAAA')
    document.getElementById("socketInfo").innerHTML
    const userlist = document.getElementById("userlist")
    const li = document.createElement('li');
    li.setAttribute('id',`${Info.name}_${Info.userID}`);
    li.innerHTML = `<span>${Info.name}_${Info.userID}</span>`;
    userlist.appendChild(li);
});
